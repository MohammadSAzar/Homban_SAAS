{% extends '_base_dashboard.html' %}

{% load static %}
{% load i18n %}
{% load jalali_tags %}
{% load number_converter %}
{% load widget_tweaks %}
{% load humanize %}
{% load weekday_finder %}


{% block title %}تقویم{% endblock %}


{% block content %}

    <!-- Messages1 -->
    <div id="successModal" class="modal">
        <div class="modal-content">
            <h4 class="modal-title" style="padding: 20px 20px 10px 0;!important;">عملیات با موفقیت انجام شد.</h4>
            <button class="modal-my-button">بستن پیام</button>
        </div>
    </div>
    <script>
        $(document).ready(function() {
            var messages = "{% for message in messages %}{{ message }}{% if not forloop.last %}\\n{% endif %}{% endfor %}";
            if (messages) {
                $('#modal-message').text(messages);
                $('#successModal').show();
            }
            $('.modal-my-button').on('click', function() {
                $('#successModal').hide();
            });
        });
    </script>

    <!-- Main -->
    <div class="card">
        <div class="card-aside-wrap">
            <div class="card-inner card-inner-lg">
                <div class="nk-block-head nk-block-head-lg">
                    <div class="nk-block-between">
                        <div class="nk-block-head-content">

                            <!-- Upper -->
                            <h5 class="nk-block-title">کلندر - پلنر</h5>
                            <div class="project-meta" style="margin-bottom: 2em; justify-content: center; align-items: center">
                                <a href="{% url 'previous_2_month' %}" class="justify-center"
                                   style="margin-top: 1em; color: black; border-bottom: black 1px solid; margin-left: 30px;"
                                >{{ previous_2_month }}</a>
                                <a href="{% url 'previous_month' %}" class="justify-center"
                                   style="margin-top: 1em; color: black; border-bottom: black 1px solid; margin-left: 30px;"
                                >{{ previous_month }}</a>
                                <a href="{% url 'current_month' %}" class="justify-center"
                                   style="margin-top: 1em; color: #00a65c; border-bottom: #00a65c 1px solid; margin-left: 30px;"
                                >{{ current_month }} (فعلی)</a>
                                <a href="{% url 'next_month' %}" class="justify-center"
                                   style="margin-top: 1em; color: black; border-bottom: black 1px solid; margin-left: 30px;"
                                >{{ next_month }}</a>
                                <a href="{% url 'next_2_month' %}" class="justify-center"
                                   style="margin-top: 1em; color: black; border-bottom: black 1px solid; margin-left: 20px;"
                                >{{ next_2_month }}</a>
                            </div>
                            <!-- end: Upper -->
                        
                            <!-- Calendar -->
                            {% if request.user.title != 'bs' %}
                                <ul class="preview-icon-list">
                                    {% for day_info in days_data %}
                                        <li class="preview-icon-item">
                                            <span class="preview-icon-name" style="font-size: 0.8em;">{{ day_info.date|weekday_finder }}</span>
                                            {% if day_info.is_today %}
                                                <!-- Today -->
                                                <div class="preview-icon-box card" style="background-color: #B2DFDB">
                                                    {{ day_info.date }}
                                                    <!-- Reminder -->
                                                    <a href="{% url 'reminder_create' %}?date={{ day_info.date }}" class="preview-icon-name" title="افزودن یادآور" target="_blank" style="margin-top: 2em;">
                                                        <em class="icon ni ni-plus" style="font-size: 1.2em;"></em>
                                                    </a>
                                                    <a href="{% url 'dated_reminder_list' %}?date={{ day_info.date }}" class="preview-icon-name" title="لیست یادآورها" target="_blank" style="margin-top: 2em;">
                                                        <em class="icon ni ni-list" style="font-size: 1.2em;"></em>
                                                    </a>
                                                    <!-- Report -->
                                                    {% if day_info.has_report %}
                                                        <a href="{% url 'report_detail' user.pk day_info.date %}" class="preview-icon-name" title="مشاهده گزارش" target="_blank" style="margin-top: 2em;">
                                                            <em class="icon ni ni-file-text" style="font-size: 1.2em; color: #4CAF50;"></em>
                                                        </a>
                                                    {% else %}
                                                        <a href="{% url 'report_create' %}" class="preview-icon-name" title="افزودن گزارش" target="_blank" style="margin-top: 2em;">
                                                            <em class="icon ni ni-edit" style="font-size: 1.2em; color: #2196F3;"></em>
                                                        </a>
                                                    {% endif %}
                                                </div>
                                                <!-- end: Today -->
                                            {% elif day_info.is_past %}
                                                <!-- Past -->
                                                <div class="preview-icon-box card">
                                                    {{ day_info.date }}
                                                    <!-- Reminders -->
                                                    <span class="preview-icon-name" style="margin-top: 2em; opacity: 0.3; cursor: not-allowed;">
                                                        <em class="icon ni ni-plus" style="font-size: 1.2em;"></em>
                                                    </span>
                                                    <a href="{% url 'dated_reminder_list' %}?date={{ day_info.date }}" title="لیست یادآورها" class="preview-icon-name" target="_blank" style="margin-top: 2em;">
                                                        <em class="icon ni ni-list" style="font-size: 1.2em;"></em>
                                                    </a>
                                                    <!-- Report -->
                                                    {% if day_info.has_report %}
                                                        <a href="{% url 'report_detail' user.pk day_info.date %}" title="مشاهده گزارش" class="preview-icon-name" target="_blank" style="margin-top: 2em;">
                                                            <em class="icon ni ni-file-text" style="font-size: 1.2em; color: #4CAF50;"></em>
                                                        </a>
                                                    {% else %}
                                                        <span class="preview-icon-name" style="margin-top: 2em; opacity: 0.3; cursor: not-allowed;">
                                                            <em class="icon ni ni-file-text" style="font-size: 1.2em;"></em>
                                                        </span>
                                                    {% endif %}
                                                </div>
                                                <!-- end: Past -->
                                            {% else %}
                                                <!-- Future -->
                                                <div class="preview-icon-box card" style="opacity: 0.6;">
                                                    {{ day_info.date }}
                                                    <!-- Reminder -->
                                                    <a href="{% url 'reminder_create' %}?date={{ day_info.date }}" title="افزودن یادآور" class="preview-icon-name" target="_blank" style="margin-top: 2em;">
                                                        <em class="icon ni ni-plus" style="font-size: 1.2em;"></em>
                                                    </a>
                                                    <a href="{% url 'dated_reminder_list' %}?date={{ day_info.date }}" title="لیست یادآورها" class="preview-icon-name" target="_blank" style="margin-top: 2em;">
                                                        <em class="icon ni ni-list" style="font-size: 1.2em;"></em>
                                                    </a>
                                                    <!-- Report -->
                                                    <span class="preview-icon-name" style="margin-top: 2em; opacity: 0.3; cursor: not-allowed;">
                                                        <em class="icon ni ni-file-text" style="font-size: 1.2em;"></em>
                                                    </span>
                                                </div>
                                                <!-- end: Future -->
                                            {% endif %}
                                        </li>
                                    {% endfor %}
                                </ul>
                            {% else %}
                                <ul class="preview-icon-list">
                                    {% for day_info in days_data %}
                                        <li class="preview-icon-item">
                                            <span class="preview-icon-name" style="font-size: 0.8em;">{{ day_info.date|weekday_finder }}</span>
                                            {% if day_info.is_today %}
                                                <!-- Today -->
                                                <div class="preview-icon-box card" style="background-color: #B2DFDB">
                                                    {{ day_info.date }}
                                                    <!-- Reports -->
                                                    <a href="{% url 'report_list' day_info.date %}" title="لیست یادآورها" class="preview-icon-name" target="_blank" style="margin-top: 2em;">
                                                        <em class="icon ni ni-reports" style="font-size: 1.2em; color: #FF9800;"></em>
                                                    </a>
                                                </div>
                                                <!-- end: Today -->
                                            {% elif day_info.is_past %}
                                                <!-- Past -->
                                                <div class="preview-icon-box card">
                                                    {{ day_info.date }}
                                                    <!-- Reports -->
                                                    <a href="{% url 'report_list' day_info.date %}" title="لیست گزارش‌ها" class="preview-icon-name" target="_blank" style="margin-top: 2em;">
                                                        <em class="icon ni ni-reports" style="font-size: 1.2em; color: #FF9800;"></em>
                                                    </a>
                                                </div>
                                                <!-- end: Past -->
                                            {% else %}
                                                <!-- Future -->
                                                <div class="preview-icon-box card" style="opacity: 0.6;">
                                                    {{ day_info.date }}
                                                    <!-- Reports -->
                                                    <span class="preview-icon-name" style="margin-top: 2em; opacity: 0.3; cursor: not-allowed;">
                                                        <em class="icon ni ni-reports" style="font-size: 1.2em;"></em>
                                                    </span>
                                                </div>
                                                <!-- end: Future -->
                                            {% endif %}
                                        </li>
                                    {% endfor %}
                                </ul>
                            {% endif %}
                            <!-- end: Calendar -->
                            
                        </div>
                    </div>
                </div>

            </div>
        </div>
    </div>

{% endblock %}


